#include <stdio.h>
#include <stdlib.h>
#include <stdint.h>
#include <math.h>
#include <uthash.h>

typedef struct
{
    uint32_t key;
    uint32_t *pairs;
    uint32_t count;
    UT_hash_handle hh; // makes this structure hashable
} PairHash;

uint32_t u_tt3[] = {7, 11, 17, 31, 37, 59, 67, 73, 109, 137, 191, 229, 271, 331, 359, 373, 449, 467, 499, 541, 557, 607, 613, 617, 673, 701, 719, 733, 739, 823, 929, 947, 1013, 1019, 1033, 1051, 1181, 1193, 1237, 1481, 1531, 1607, 1627, 1657, 1663, 1667, 1699, 1907, 2069, 2143, 2213, 2297, 2377, 2381, 2411, 2441, 2503, 2579, 2707, 2789, 2843, 2917, 2957, 3049, 3119, 3301, 3461, 3469, 3637, 3769, 3911, 3923, 3931, 4019, 4159, 4253, 4583, 4729, 4919, 5051, 5059, 5099, 5171, 5281, 5323, 5381, 5419, 5449, 5507, 5521, 5531, 5573, 5801, 5839, 5869, 5923, 6037, 6073, 6263, 6277, 6353, 6451, 6469, 6529, 6563, 6571, 6599, 6637, 6653, 6793, 6871, 6899, 6947, 7039, 7057, 7159, 7253, 7369, 7591, 7649, 7691, 7963, 8219, 8237, 8377, 8431, 8629, 8669, 8699, 8713, 8747, 8783, 9103, 9157, 9181, 9241, 9461, 9521, 9623, 9857, 9887, 9901};
uint32_t u_tt7[] = {19, 61, 97, 109, 127, 229, 283, 433, 487, 523, 541, 547, 673, 691, 757, 823, 829, 853, 883, 937, 1171, 1237, 1249, 1399, 1453, 1471, 1549, 1693, 1741, 1861, 1879, 1993, 1999, 2089, 2161, 2269, 2287, 2341, 2467, 2503, 2617, 2671, 2707, 2719, 2953, 3019, 3181, 3331, 3361, 3433, 3583, 3613, 3709, 3727, 3823, 4027, 4159, 4177, 4201, 4219, 4357, 4441, 4507, 4567, 4729, 4903, 5437, 5521, 5641, 5659, 5689, 5821, 6091, 6163, 6421, 6481, 6679, 6949, 7351, 7417, 7489, 7723, 7933, 8017, 8101, 8167, 8311, 8317, 8779, 8803, 8839, 8893, 8941, 9043, 9337, 9349, 9601, 9613, 9829, 9901};
uint32_t u_tt11[] = {23, 113, 239, 251, 353, 503, 587, 701, 743, 839, 863, 941, 953};
uint32_t u_tt13[] = {19, 61, 103, 127, 241, 331, 337, 367, 523, 577, 709, 829, 997};
uint32_t u_tt17[] = {83, 239, 257, 383, 389, 431, 449, 491, 881, 971};
uint32_t u_tt19[] = {31, 79, 97, 163, 181, 433, 571, 577, 709, 727, 937, 991, 997};
uint32_t u_tt23[] = {47, 89, 311, 509, 677, 743, 761, 773, 827};
uint32_t u_tt29[] = {71, 137, 167, 179, 347, 383, 401, 569, 599, 683, 761, 881};
uint32_t u_tt31[] = {139, 151, 181, 859, 907, 991};
uint32_t u_tt37[] = {67, 79, 199, 277, 313, 463, 607, 967, 991};
uint32_t u_tt41[] = {227, 257, 593, 719, 863, 887, 911};
uint32_t u_tt43[] = {97, 103, 223, 271, 499, 613, 691};
uint32_t u_tt47[] = {149, 251, 269, 293, 419, 521, 947};
uint32_t u_tt53[] = {113, 197, 269, 353, 401, 419, 653};
uint32_t u_tt59[] = {167, 197, 419, 929, 971};
uint32_t u_tt61[] = {151, 331, 409, 487, 751};
uint32_t u_tt67[] = {139, 157, 547, 601, 619, 751, 757};
uint32_t u_tt71[] = {233, 257, 263, 317, 389, 443, 719, 821, 887, 947, 971};
uint32_t u_tt73[] = {277, 547, 571, 607, 643, 757, 823};
uint32_t u_tt79[] = {193, 241, 367, 397, 613, 631, 967};
uint32_t u_tt83[] = {227, 311, 443, 449, 563, 701, 719, 773, 911};
uint32_t u_tt89[] = {107, 137, 293, 431, 443, 521, 809, 821, 977, 983};
uint32_t u_tt97[] = {157, 241, 373, 379, 787, 829, 883, 919, 967};

int main(int argc, char *argv[])
{

    PairHash *pair_hash = NULL;
    // for each of the primes above, create a PairHash entry
    uint32_t primes[] = {3, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97};
    uint32_t *prime_arrays[] = {u_tt3, u_tt7, u_tt11, u_tt13, u_tt17, u_tt19, u_tt23, u_tt29, u_tt31, u_tt37, u_tt41, u_tt43, u_tt47, u_tt53, u_tt59, u_tt61, u_tt67, u_tt71, u_tt73, u_tt79, u_tt83, u_tt89, u_tt97};
    size_t prime_array_sizes[] = {sizeof(u_tt3) / sizeof(u_tt3[0]), sizeof(u_tt7) / sizeof(u_tt7[0]), sizeof(u_tt11) / sizeof(u_tt11[0]), sizeof(u_tt13) / sizeof(u_tt13[0]), sizeof(u_tt17) / sizeof(u_tt17[0]), sizeof(u_tt19) / sizeof(u_tt19[0]), sizeof(u_tt23) / sizeof(u_tt23[0]), sizeof(u_tt29) / sizeof(u_tt29[0]), sizeof(u_tt31) / sizeof(u_tt31[0]), sizeof(u_tt37) / sizeof(u_tt37[0]), sizeof(u_tt41) / sizeof(u_tt41[0]), sizeof(u_tt43) / sizeof(u_tt43[0]), sizeof(u_tt47) / sizeof(u_tt47[0]), sizeof(u_tt53) / sizeof(u_tt53[0]), sizeof(u_tt59) / sizeof(u_tt59[0]), sizeof(u_tt61) / sizeof(u_tt61[0]), sizeof(u_tt67) / sizeof(u_tt67[0]), sizeof(u_tt71) / sizeof(u_tt71[0]), sizeof(u_tt73) / sizeof(u_tt73[0]), sizeof(u_tt79) / sizeof(u_tt79[0]), sizeof(u_tt83) / sizeof(u_tt83[0]), sizeof(u_tt89) / sizeof(u_tt89[0]), sizeof(u_tt97) / sizeof(u_tt97[0])};
    for (size_t i = 0; i < sizeof(prime_arrays) / sizeof(prime_arrays[0]); i++)
    {
        PairHash *pair = malloc(sizeof(PairHash));
        pair->key = primes[i];
        pair->pairs = malloc(prime_array_sizes[i] * sizeof(uint32_t));
        pair->count = 0;
        for (size_t j = 0; j < prime_array_sizes[i]; j++)
        {
            pair->pairs[j] = prime_arrays[i][j];
            pair->count++;
        }
        HASH_ADD_INT(pair_hash, key, pair);
    }

    return 0;
}